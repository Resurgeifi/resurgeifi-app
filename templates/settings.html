{% extends "base.html" %}
{% block title %}Settings | Resurgifi{% endblock %}

{% block content %}
<div class="main-content" style="text-align: center;">

  <h1>‚öôÔ∏è Settings</h1>
  <p style="font-style: italic;">Adjust your preferences below.</p>

  <!-- üß≠ Example Option -->
  <div class="card-dark">
    <p><strong>üåé Timezone:</strong> {{ timezone or "Not set" }}</p>
    <p><strong>üé® Theme:</strong> {{ theme_choice or "None" }}</p>
  </div>

  <!-- üëÜ Grace Trigger Button -->
  <button id="triggerGrace" class="global-button" style="margin-top: 2rem;">
    üåü Trigger Grace
  </button>

</div>

<!-- üåü Grace Flash (inline) -->
<div id="graceFlash" class="hero-flash">
  <img src="{{ url_for('static', filename='images/heroes/Grace_Transparent.png') }}" alt="Grace Flash" />
  <div class="speech-box">
    <p class="hero-quote">‚ÄúYou didn‚Äôt skip the journey. You lived it.‚Äù</p>
  </div>
</div>
<audio id="graceSound" preload="auto" playsinline src="{{ url_for('static', filename='audio/levelup.mp3') }}"></audio>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener("DOMContentLoaded", () => {
  const flash = document.getElementById("graceFlash");
  const button = document.getElementById("triggerGrace");
  const audio = document.getElementById("graceSound");

  flash.style.display = "none";
  flash.style.opacity = 0;

  button.addEventListener("click", () => {
    try {
      audio.pause();
      audio.currentTime = 0;
      audio.volume = 1.0;
      audio.play().catch(err => {
        console.warn("Grace sound failed to play:", err);
      });
    } catch (e) {
      console.warn("Audio error:", e);
    }

    requestAnimationFrame(() => {
      flash.style.display = "flex";
      setTimeout(() => {
        flash.style.opacity = 1;

        setTimeout(() => {
          flash.style.opacity = 0;
          setTimeout(() => {
            flash.style.display = "none";
          }, 600);
        }, 3000);
      }, 50);
    });
  });
});
</script>
{% endblock %}

{% block styles %}
<style>
.card-dark {
  font-size: 1.25rem;
  line-height: 1.7;
  background: rgba(0,0,0,0.6);
  padding: 1.5rem;
  border-radius: 12px;
  margin: 2rem auto;
  width: 90%;
  max-width: 420px;
  box-shadow: 0 0 20px rgba(0,0,0,0.4);
}

.hero-flash {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.9);
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  transition: opacity 0.4s ease;
  opacity: 0;
}

.hero-flash img {
  width: 90vw;
  max-width: 460px;
  animation: pulseGlow 2.5s ease-out;
}

.speech-box {
  margin-top: 1.5rem;
  background: #000;
  padding: 1.2rem 2rem;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
}

.hero-quote {
  font-size: 1.4rem;
  color: #f6e7c1;
  line-height: 1.6;
}

@keyframes pulseGlow {
  0%, 100% { transform: scale(1); filter: drop-shadow(0 0 8px #fefae0); }
  50%      { transform: scale(1.02); filter: drop-shadow(0 0 16px #fff8c1); }
}
</style>
{% endblock %}

