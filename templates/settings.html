{% extends "base.html" %}
{% block title %}Settings | Resurgifi{% endblock %}

{% block content %}
<div class="main-content" style="max-width: 600px; margin: 2rem auto; text-align: center;">
  <h1>âš™ï¸ Settings</h1>
  <p class="mantra">Update your journey settings, nickname, and visibility below.</p>

  <form method="POST" action="/settings" style="margin-top: 2rem;">
    <div class="card-dark" style="padding: 2rem;">

      <!-- ğŸŒ€ Journey Selection -->
      <label for="theme_choice" style="font-size: 1.2rem; display: block; margin-bottom: 1rem;"><strong>Your Journey</strong></label>
      <select name="theme_choice" id="theme_choice" class="global-button" style="width: 100%; padding: 0.6rem; font-size: 1rem; border-radius: 8px;">
        <option value="">-- Select Journey --</option>
        <option value="Major loss or grieving" {% if theme_choice == "Major loss or grieving" %}selected{% endif %}>ğŸ’” Grief</option>
        <option value="Anxiety or fear" {% if theme_choice == "Anxiety or fear" %}selected{% endif %}>ğŸŒªï¸ Anxiety</option>
        <option value="Addiction" {% if theme_choice == "Addiction" %}selected{% endif %}>ğŸ’Š Addiction</option>
        <option value="Depression or emptiness" {% if theme_choice == "Depression or emptiness" %}selected{% endif %}>ğŸŒ«ï¸ Depression</option>
        <option value="Low self-worth" {% if theme_choice == "Low self-worth" %}selected{% endif %}>ğŸª Self-Worth</option>
        <option value="Trauma or PTSD" {% if theme_choice == "Trauma or PTSD" %}selected{% endif %}>ğŸ”¥ Trauma</option>
        <option value="Emotional growth" {% if theme_choice == "Emotional growth" %}selected{% endif %}>ğŸŒ± Emotional Growth</option>
      </select>

      <!-- ğŸ“… Start Date -->
      <label for="journey_start_date" style="font-size: 1.2rem; display: block; margin-top: 2rem;"><strong>ğŸŒ„ When did your journey begin?</strong></label>
      <input type="date" 
             name="journey_start_date" 
             value="{{ journey_start_date }}" 
             min="1950-01-01" 
             max="{{ '%Y-%m-%d' | format(datetime.utcnow()) }}"
             style="margin-top: 0.5rem; padding: 0.6rem; width: 100%; font-size: 1rem; border-radius: 8px;">

      <!-- ğŸ“ Nickname -->
      <label for="nickname" style="font-size: 1.2rem; display: block; margin-top: 2rem;"><strong>ğŸ“ Your Nickname</strong></label>
      <input type="text" name="nickname" value="{{ nickname }}" placeholder="What do people call you?" style="margin-top: 0.5rem; padding: 0.6rem; width: 100%; font-size: 1rem; border-radius: 8px;">

      <!-- ğŸ‘ï¸ Visibility Toggle -->
      <div style="margin-top: 2rem;">
        <label style="font-size: 1.1rem;">
          <input type="checkbox" name="show_journey_publicly" {% if g.user.show_journey_publicly %}checked{% endif %}>
          Show my journey on public profile
        </label>
      </div>

      <!-- âœ… Save -->
      <button type="submit" class="global-button" style="margin-top: 2rem;">ğŸ’¾ Save Settings</button>
    </div>
  </form>

  <div class="card-dark" style="padding: 1.5rem; margin-top: 2rem;">
    <p class="mantra">Want to help us improve Resurgifi?</p>
    <a href="/feedback" class="global-button">ğŸ“£ Leave Feedback</a>
  </div>

  <form action="{{ url_for('logout') }}" method="get">
    <div class="card-dark" style="padding: 1.5rem; margin-top: 2rem;">
      <button type="submit" class="global-button" style="background-color: #880e4f; color: #fff;">Log Out</button>
    </div>
  </form>
</div>

<!-- No Grace Flash here -->
{% endblock %}
