{% extends "base.html" %}
{% block title %}Settings | Resurgifi{% endblock %}

{% block content %}
<div class="container" style="max-width: 600px; margin: 2rem auto; text-align: center;">
  <h1>âš™ï¸ Settings</h1>
  <p class="mantra">Customize your experience â€” change your journey below.</p>

  <hr style="margin: 2rem 0;">

  <!-- Journey Selector -->
  <form method="POST" action="/settings">
    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem;">
      <button type="submit" name="journey" value="grief" class="journey-card">ğŸ’” Grief</button>
      <button type="submit" name="journey" value="addiction" class="journey-card">ğŸ’Š Addiction</button>
      <button type="submit" name="journey" value="mental_health" class="journey-card">ğŸ§  Mental Health</button>
      <button type="submit" name="journey" value="trauma" class="journey-card">ğŸ”¥ Trauma</button>
      <button type="submit" name="journey" value="anxiety" class="journey-card">ğŸŒªï¸ Anxiety</button>
    </div>
  </form>

  <p class="current-journey-text">
    Current Journey: <strong>{{ session.get('journey', 'Not selected') | replace('_', ' ') | title }}</strong>
  </p>

  <!-- Journey Start Date Input -->
  <form method="POST" action="/settings" style="margin-top: 2.5rem;">
    <div class="journey-date-wrapper">
      <label for="journey_start_date" class="journey-date-label">ğŸŒ„ When did your journey begin?</label>
      <input 
        type="date" 
        name="journey_start_date" 
        value="{{ journey_start_date }}" 
        class="journey-date-input"
      >
      <small class="journey-date-note">
        This could be your sobriety date, a moment of surrender, or just a personal turning point.
      </small>
      <br><br>
      <button type="submit">Save Journey Start Date</button>
    </div>
  </form>

  <hr class="section-divider">

  <!-- Time Zone Selector -->
  <form method="POST" action="/settings" style="margin-top: 2rem;">
    <label for="timezone" style="font-weight: bold; color: #f6e7c1;">ğŸŒ Select Your Time Zone:</label><br><br>
    <select name="timezone" required
            style="padding: 12px; border-radius: 10px; font-size: 1rem; background-color: #f6e7c1; color: #1f3e36; border: 2px solid #1e2d2b; width: 90%; max-width: 300px;">
      <option value="">-- Select --</option>
      <option value="America/New_York" {% if timezone == 'America/New_York' %}selected{% endif %}>Eastern (New York)</option>
      <option value="America/Chicago" {% if timezone == 'America/Chicago' %}selected{% endif %}>Central (Chicago)</option>
      <option value="America/Denver" {% if timezone == 'America/Denver' %}selected{% endif %}>Mountain (Denver)</option>
      <option value="America/Los_Angeles" {% if timezone == 'America/Los_Angeles' %}selected{% endif %}>Pacific (Los Angeles)</option>
      <option value="America/Phoenix" {% if timezone == 'America/Phoenix' %}selected{% endif %}>Arizona (Phoenix)</option>
      <option value="America/Anchorage" {% if timezone == 'America/Anchorage' %}selected{% endif %}>Alaska (Anchorage)</option>
      <option value="America/Honolulu" {% if timezone == 'America/Honolulu' %}selected{% endif %}>Hawaii (Honolulu)</option>
    </select><br><br>
    <button type="submit">Save Time Zone</button>
  </form>

  <!-- Nickname Update -->
  <form method="POST" action="/settings" style="margin-top: 2rem;">
    <label for="nickname" style="font-weight: bold; color: #f6e7c1;">ğŸ“ Update Your Nickname:</label><br><br>
    <input type="text" name="nickname" value="{{ nickname }}" placeholder="Enter nickname"
           style="padding: 12px; width: 90%; max-width: 300px; border-radius: 10px; font-size: 1rem; background-color: #f6e7c1; color: #1f3e36; border: 2px solid #1e2d2b;"><br><br>
    <button type="submit">Save Nickname</button>
  </form>

  <!-- Logout -->
  <form action="{{ url_for('logout') }}" method="get" style="margin-top: 3rem;">
    <button type="submit" style="padding: 0.75rem 2rem; background-color: #e11d48; color: white; border: none; border-radius: 8px;">
      Log Out
    </button>
  </form>
</div>

{% endblock %}
