{% extends "base.html" %}
{% block content %}

<!-- üîä Ambient Intro Music (hidden until user clicks) -->
<audio id="landingAudio" loop preload="auto">
  <source src="{{ url_for('static', filename='audio/ambient_intro.mp3') }}" type="audio/mpeg" />
</audio>

<!-- üåå Flash Intro Overlay -->
<div id="questFlash" class="quest-flash" onclick="startExperience()">
  <div class="quest-quote">‚ÄúYou‚Äôve opened your eyes inside the State of Inner‚Ä¶<br><strong>Tap to begin your resurgence.</strong>‚Äù</div>
</div>

<!-- üéûÔ∏è Cinematic Carousel (hidden until intro dismissed) -->
<div id="carouselContainer" style="display: none;">
  <div id="resurgifiCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="false">
    <div class="carousel-inner">

      <!-- Slide 1: Welcome -->
      <div class="carousel-item active slide-card">
        <h1>Welcome to Resurgifi</h1>
        <p>This is more than an app ‚Äî it‚Äôs an emotional universe.</p>
        <p>üéß Sound is playing. If your phone is on silent, you might miss it. We recommend turning it on for the full experience.</p>
        <img src="{{ url_for('static', filename='images/heroes/Grace_Transparent.png') }}" class="slide-image" alt="Grace Shadow">
      </div>

      <!-- Slide 2: The Problem -->
      <div class="carousel-item slide-card">
        <h2>"You ever leave treatment with a binder full of tools you‚Äôll never touch again?"</h2>
        <p>So did we. That‚Äôs why we built this.</p>
        <img src="{{ url_for('static', filename='images/villains/wardenfall/wardenfall_transparent.png') }}" class="slide-image">
      </div>

      <!-- Slide 3: What Resurgifi Is -->
      <div class="carousel-item slide-card">
        <h2>A recovery world where therapy tools come to life.</h2>
        <p>You‚Äôll talk to heroes who remember you. Battle villains made of cravings, shame, and fear. Rebuild through quests, journals, and emotional muscle.</p>
        <img src="{{ url_for('static', filename='images/heroes/cognita/Cognita_Transparent.png') }}" class="slide-image">
      </div>

      <!-- Slide 4: The State of Inner -->
      <div class="carousel-item slide-card">
        <h2>Everything happens in the State of Inner</h2>
        <p>Detox Docks. Bridge Between. Crystal Mountain. This map is your mind ‚Äî and your battlefield.</p>
        <img src="{{ url_for('static', filename='images/villains/thecrave/thecrave_transparent.png') }}" class="slide-image">
      </div>

      <!-- Slide 5: Why It‚Äôs Different -->
      <div class="carousel-item slide-card">
        <h2>This isn‚Äôt worksheet recovery.</h2>
        <p>This is late-night group therapy meets graphic novel. Built by someone who‚Äôs been through it ‚Äî not by a committee.</p>
      </div>

      <!-- Slide 6: You Are Here -->
      <div class="carousel-item slide-card">
        <h2>This is still in development ‚Äî and you‚Äôre part of the team.</h2>
        <p>Your feedback shapes the tools that could save lives. Welcome to the squad.</p>
        <img src="{{ url_for('static', filename='images/heroes/lucentis/Lucentis_Transparent.png') }}" class="slide-image">
        <script>navigator.vibrate && navigator.vibrate([300, 50, 300]);</script>
      </div>

      <!-- Slide 7: Begin -->
      <div class="carousel-item slide-card">
        <h2>Ready?</h2>
        <a href="{{ url_for('register') }}" class="btn btn-lg btn-success mt-4">Start Your Resurgence</a>
      </div>

    </div>

    <!-- Carousel Controls -->
    <button class="carousel-control-prev" type="button" data-bs-target="#resurgifiCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#resurgifiCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</div>

<!-- ‚ú® Script to Launch Experience -->
<script>
function startExperience() {
  document.getElementById('questFlash').style.display = 'none';
  document.getElementById('carouselContainer').style.display = 'block';
  const audio = document.getElementById('landingAudio');
  if (audio) {
    audio.play().catch(err => console.warn("Audio blocked:", err));
  }
}
</script>

<style>
.quest-flash {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: radial-gradient(circle, #000000 20%, #1a1a1a 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  cursor: pointer;
}
.quest-quote {
  color: #f6e7c1;
  font-size: 1.8rem;
  font-weight: 300;
  text-align: center;
  max-width: 600px;
  padding: 2rem;
  animation: fadeInText 3s ease forwards;
}
@keyframes fadeInText {
  0% { opacity: 0; transform: translateY(20px); }
  100% { opacity: 1; transform: translateY(0); }
}
.slide-card {
  min-height: 100vh;
  background: #2a2d3a;
  padding: 2rem;
  border-radius: 14px;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
  box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #f6e7c1;
}
.slide-image {
  max-height: 300px;
  opacity: 0.6;
  margin-top: 1rem;
}
</style>

{% endblock %}










