{% extends "base.html" %}
{% block content %}

<!-- ðŸ”Š Ambient Intro Music (hidden until user clicks) -->
<audio id="landingAudio" loop preload="auto">
  <source src="{{ url_for('static', filename='audio/ambient_intro.mp3') }}" type="audio/mpeg" />
</audio>

<!-- ðŸŒŒ Intro Screen -->
<div id="introScreen" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #000; color: #f6e7c1; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; z-index: 2000;">
  <h1 style="font-size: 2.8rem; margin-bottom: 1rem;">Welcome to Resurgifi</h1>
  <p style="font-size: 1.2rem; max-width: 600px;">A mental health universe built from the inside out. ðŸŽ§ Sound is part of this journey â€” if your phone is on silent, we recommend turning it on.</p>
  <button onclick="startExperience()" style="margin-top: 2rem; padding: 0.75rem 2rem; font-size: 1.2rem; background-color: #0d6efd; color: white; border: none; border-radius: 10px;">Enter the World</button>
</div>

<!-- ðŸŽžï¸ Cinematic Carousel (hidden until intro dismissed) -->
<div id="carouselContainer" style="display: none;">
  <div id="resurgifiCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="false">
    <div class="carousel-inner">

      <!-- Slide 1: Welcome -->
      <div class="carousel-item active text-center p-5">
        <h1>Welcome to Resurgifi</h1>
        <p>This is more than an app â€” itâ€™s an emotional universe.</p>
        <p>ðŸŽ§ Sound is playing. If your phone is on silent, you might miss it. We recommend turning it on for the full experience.</p>
        <img src="{{ url_for('static', filename='images/heroes/grace/Grace_Transparent.png') }}" style="max-height: 300px; opacity: 0.5;" alt="Grace Shadow">
      </div>

      <!-- Slide 2: The Problem -->
      <div class="carousel-item text-center p-5">
        <h2>"You ever leave treatment with a binder full of tools youâ€™ll never touch again?"</h2>
        <p>So did we. Thatâ€™s why we built this.</p>
        <img src="{{ url_for('static', filename='images/villains/wardenfall/wardenfall_transparent.png') }}" style="max-height: 300px; opacity: 0.4;">
      </div>

      <!-- Slide 3: What Resurgifi Is -->
      <div class="carousel-item text-center p-5">
        <h2>A recovery world where therapy tools come to life.</h2>
        <p>Youâ€™ll talk to heroes who remember you. Battle villains made of cravings, shame, and fear. Rebuild through quests, journals, and emotional muscle.</p>
        <img src="{{ url_for('static', filename='images/heroes/cognita/Cognita_Transparent.png') }}" style="max-height: 300px;">
      </div>

      <!-- Slide 4: The State of Inner -->
      <div class="carousel-item text-center p-5">
        <h2>Everything happens in the State of Inner</h2>
        <p>Detox Docks. Bridge Between. Crystal Mountain. This map is your mind â€” and your battlefield.</p>
        <img src="{{ url_for('static', filename='images/villains/thecrave/thecrave_transparent.png') }}" style="max-height: 300px;">
      </div>

      <!-- Slide 5: Why Itâ€™s Different -->
      <div class="carousel-item text-center p-5">
        <h2>This isnâ€™t worksheet recovery.</h2>
        <p>This is late-night group therapy meets graphic novel. Built by someone whoâ€™s been through it â€” not by a committee.</p>
      </div>

      <!-- Slide 6: You Are Here -->
      <div class="carousel-item text-center p-5">
        <h2>This is still in development â€” and youâ€™re part of the team.</h2>
        <p>Your feedback shapes the tools that could save lives. Welcome to the squad.</p>
        <img src="{{ url_for('static', filename='images/heroes/lucentis/Lucentis_Transparent.png') }}" style="max-height: 300px;">
        <script>navigator.vibrate && navigator.vibrate([300, 50, 300]);</script>
      </div>

      <!-- Slide 7: Begin -->
      <div class="carousel-item text-center p-5">
        <h2>Ready?</h2>
        <a href="{{ url_for('register') }}" class="btn btn-lg btn-success mt-4">Start Your Resurgence</a>
      </div>

    </div>

    <!-- Carousel Controls -->
    <button class="carousel-control-prev" type="button" data-bs-target="#resurgifiCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#resurgifiCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</div>

<!-- âœ¨ Script to Launch Experience -->
<script>
function startExperience() {
  document.getElementById('introScreen').style.display = 'none';
  document.getElementById('carouselContainer').style.display = 'block';
  const audio = document.getElementById('landingAudio');
  if (audio) {
    audio.play().catch(err => console.warn("Audio blocked:", err));
  }
}
</script>

{% endblock %}










